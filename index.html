<html>
<head>
<title>CS-416 Data Visualization</title>
</head>

<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=300 height=300>
</svg>
<script>

async function init() {

data = await d3.csv("cars2017.csv");

let AverageCityMPG = data.map(a => a.AverageCityMPG);
let AverageHighwayMPG = data.map(a => a.AverageHighwayMPG);

const x1s = d3.scaleLog([10, 150], [0, 200]).base(10);
const y1s = d3.scaleLog([10, 150], [200, 0]).base(10);

d3.select("svg").append("g")
 .attr("transform","translate(50,50)")
 .selectAll().data(data).enter().append("circle")
 .attr("cx", function(d,i) {return x1s(d["AverageCityMPG"]);})
 .attr("cy", function(d,i) {return y1s(d["AverageHighwayMPG"]);})
 .attr("r", function(d,i) {return parseInt(d["EngineCylinders"]) + 2;});


dt = [10,20,50,100];

var x = d3.scaleBand().domain(dt).range([10,150]);
var y = d3.scaleBand().domain(dt).range([10,150]);


var x_axis = d3.axisBottom(x1s).tickValues(dt).tickFormat(d3.format("~s"));
var y_axis = d3.axisLeft(y1s).tickValues(dt).tickFormat(d3.format("~s"));;


d3.select("svg").append("g")
 .attr("transform","translate(50,50)")
 .call(y_axis)
 .attr("text-anchor", "end")
 .select("path").attr("d","M-6,200.5H0.5V0.5H-6")
 .select("g").selectAll().data(dt);


d3.select("svg").append("g")
 .attr("transform","translate(50,250)")
 .call(x_axis)
 .attr("text-anchor", "middle")
 .select("path").attr("d","M0.5,6V0.5H200.5V6")
 .select("g").selectAll().data(dt);

}
</script>

</body>
</html>